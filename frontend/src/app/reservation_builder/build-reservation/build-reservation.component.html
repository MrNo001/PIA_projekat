<div class="build-reservation">
  <div class="cottage-info mb-4" *ngIf="cottage.Title">
    <h3>{{ cottage.Title }}</h3>
    <p class="price-display">{{ cottage.PriceSummer }}€ / night</p>
  </div>
  
  <h4 class="mb-4">Enter reservation details</h4>

  <div class="calendar-container mb-4">
    <div class="input-group">
      <label for="startDate">Start Date</label>
      <input type="date" class="form-control" id="startDate"
             [min]="minStartDate | date:'yyyy-MM-dd'"
             [(ngModel)]="startDate" (change)="updateReservationData()">
    </div>

    <div class="input-group">
      <label for="endDate">End Date</label>
      <input type="date" class="form-control" id="endDate"
             [min]="minEndDate | date:'yyyy-MM-dd'"
             [(ngModel)]="endDate" (change)="updateReservationData()">
    </div>
  </div>

  <div class="row">
    <div class="col-md-6">
      <div class="input-group">
        <label for="adults">Number of Adults</label>
        <input type="number" class="form-control" id="adults" min="1"
               [(ngModel)]="adults" (change)="updateReservationData()">
      </div>
    </div>
    <div class="col-md-6">
      <div class="input-group">
        <label for="children">Number of Children</label>
        <input type="number" class="form-control" id="children" min="0"
               [(ngModel)]="children" (change)="updateReservationData()">
      </div>
    </div>
  </div>

  <!-- Price Summary -->
  <div class="price-summary mt-4" *ngIf="isValid">
    <div class="summary-card">
      <h5>Reservation Summary</h5>
      <div class="summary-item">
        <span>Period:</span>
        <span>{{ formattedPeriod }}</span>
      </div>
      <div class="summary-item">
        <span>Number of nights:</span>
        <span>{{ nights }}</span>
      </div>
      <div class="summary-item">
        <span>Price per night:</span>
        <span>{{ cottage.PriceSummer || 85 }}€</span>
      </div>
      <div class="summary-item total">
        <span>Total price:</span>
        <span><strong>{{ totalPrice }}€</strong></span>
      </div>
    </div>
  </div>

  <div class="alert alert-info mt-4">
    <i class="bi bi-info-circle"></i> Minimum stay is 2 nights. Nightly rate: {{ cottage.PriceSummer || 85 }}€ per night.
  </div>

  <div *ngIf="validationError" class="alert alert-danger">
    <i class="bi bi-exclamation-circle"></i>
    {{ validationError }}
  </div>

  <!-- Continue Button -->
  <div class="continue-section mt-4" *ngIf="isValid">
    <button class="btn btn-primary btn-lg" (click)="continueToConfirmation()">
      Continue to Confirmation
    </button>
  </div>
</div>
