<div class="confirm-reservation">
  <h4 class="mb-4">Potvrdite rezervaciju</h4>

  <div class="summary-card">
    <h5>Detalji rezervacije</h5>
    <div class="summary-item">
      <span>Cottage:</span>
      <span><strong>{{ cottage?.Title || 'Učitavanje...' }}</strong></span>
    </div>
    <div class="summary-item">
      <span>Period:</span>
      <span>{{ formattedPeriod }}</span>
    </div>
    <div class="summary-item">
      <span>Broj gostiju:</span>
      <span>{{ formattedGuests }}</span>
    </div>
    <div class="summary-item">
      <span>Broj noći:</span>
      <span>{{ nights }}</span>
    </div>

    <div class="price-calculation">
      <div class="summary-item">
        <span>Cena po noći:</span>
        <span>{{ getPricePerNight() }}€</span>
      </div>
      <div class="summary-item">
        <span>Ukupno noći:</span>
        <span>{{ nights }}</span>
      </div>
      <div class="summary-item">
        <span>Ukupna cena:</span>
        <span><strong>{{ totalPrice }}€</strong></span>
      </div>
    </div>
  </div>

  <div class="form-section">
    <div class="input-group-custom">
      <label for="cardNumber">Broj kreditne kartice</label>
      <div class="card-input-wrapper">
        <input type="text" class="form-control-card" id="cardNumber"
               placeholder="1234 5678 9012 3456"
               [(ngModel)]="cardNumber">
      </div>
    </div>

    <div class="input-group-custom">
      <label for="specialRequests">Posebni zahtevi (opciono)</label>
      <textarea class="form-control-textarea" id="specialRequests" rows="4"
                placeholder="Ako imate neke posebne zahteve, navedite ih ovde..."
                maxlength="500" [(ngModel)]="specialRequests"></textarea>
      <div class="character-count">{{ specialRequests.length }}/500 karaktera</div>
    </div>
  </div>

  <div *ngIf="submitError" class="alert alert-danger">
    <i class="bi bi-exclamation-circle"></i>
    {{ submitError }}
  </div>

  <div class="button-group">
    <button class="btn btn-primary btn-confirm" (click)="completeReservation()"
            [disabled]="isSubmitting">
      <span *ngIf="isSubmitting" class="spinner-border spinner-border-sm me-2" role="status"></span>
      {{ isSubmitting ? 'Kreiranje rezervacije...' : 'Završi rezervaciju' }}
    </button>
  </div>
</div>
